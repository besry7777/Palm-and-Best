<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>บาคาร่า Premium</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            -webkit-user-select: none;
            user-select: none;
            overflow: hidden;
        }
        
        body {
            font-family: 'Kanit', sans-serif;
            background: #000;
            color: #fff;
            width: 100vw;
            height: 100vh;
            position: fixed;
            touch-action: manipulation;
        }
        
        .game-container {
            width: 100%;
            height: 100%;
            position: relative;
            background: url('https://images.unsplash.com/photo-1518895949257-7621c3c786d7?ixlib=rb-1.2.1&auto=format&fit=crop&w=1480&q=80') no-repeat center center;
            background-size: cover;
        }
        
        .table-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            flex-direction: column;
        }
        
        .header {
            height: 60px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
            background: rgba(0, 0, 0, 0.8);
            border-bottom: 1px solid #ff0077;
        }
        
        .logo {
            font-size: 24px;
            font-weight: bold;
            color: #ff0077;
            text-shadow: 0 0 10px rgba(255, 0, 119, 0.7);
        }
        
        .balance {
            font-size: 18px;
            color: #fff;
            background: rgba(255, 0, 119, 0.3);
            padding: 5px 15px;
            border-radius: 20px;
            border: 1px solid #ff0077;
        }
        
        .game-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 20px;
        }
        
        .cards-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            position: relative;
        }
        
        .cards-row {
            display: flex;
            justify-content: center;
            margin: 10px 0;
            position: relative;
        }
        
        .card {
            width: 80px;
            height: 110px;
            background: #fff;
            border-radius: 5px;
            margin: 0 5px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 30px;
            color: #000;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.5);
            position: relative;
            transition: transform 0.3s;
        }
        
        .card.red {
            color: #ff0000;
        }
        
        .card-back {
            background: linear-gradient(135deg, #ff0077, #ff00cc);
            color: white;
        }
        
        .card-value {
            position: absolute;
            font-size: 14px;
        }
        
        .top-left {
            top: 5px;
            left: 5px;
        }
        
        .bottom-right {
            bottom: 5px;
            right: 5px;
            transform: rotate(180deg);
        }
        
        .betting-area {
            height: 150px;
            display: flex;
            justify-content: space-around;
            align-items: center;
            padding: 10px;
            background: rgba(0, 0, 0, 0.8);
            border-top: 1px solid #ff0077;
        }
        
        .bet-option {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
        }
        
        .bet-option:active {
            transform: scale(0.95);
        }
        
        .banker {
            background: linear-gradient(135deg, #ff0077, #cc0066);
            border: 2px solid #ff0077;
        }
        
        .player {
            background: linear-gradient(135deg, #00aaff, #0077cc);
            border: 2px solid #00aaff;
        }
        
        .tie {
            background: linear-gradient(135deg, #00ff77, #00cc66);
            border: 2px solid #00ff77;
        }
        
        .bet-amount {
            position: absolute;
            bottom: -20px;
            font-size: 14px;
            color: #fff;
            white-space: nowrap;
        }
        
        .chip {
            position: absolute;
            width: 30px;
            height: 30px;
            background: #ffcc00;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            color: #000;
            top: -10px;
            right: -10px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
            font-size: 12px;
        }
        
        .result-display {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 24px;
            font-weight: bold;
            color: #ffcc00;
            text-shadow: 0 0 10px rgba(0, 0, 0, 0.8);
            background: rgba(0, 0, 0, 0.7);
            padding: 10px 20px;
            border-radius: 20px;
            display: none;
        }
        
        .history {
            position: absolute;
            bottom: 160px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 5px;
        }
        
        .history-item {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            font-size: 12px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
        }
        
        .history-banker {
            background: #ff0077;
        }
        
        .history-player {
            background: #00aaff;
        }
        
        .history-tie {
            background: #00ff77;
        }
        
        .auto-play {
            position: absolute;
            top: 70px;
            right: 20px;
            background: rgba(255, 0, 119, 0.3);
            border: 1px solid #ff0077;
            color: #fff;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 5px;
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <div class="game-container">
        <div class="table-overlay">
            <div class="header">
                <div class="logo">BACCARAT</div>
                <div class="balance" id="balance">10,000</div>
            </div>
            
            <div class="game-area">
                <div class="auto-play">
                    <i class="fas fa-play"></i> AUTO
                </div>
                
                <div class="cards-area">
                    <div class="history" id="history"></div>
                    
                    <div class="cards-row" id="banker-cards">
                        <!-- Banker cards will be here -->
                    </div>
                    
                    <div class="cards-row" id="player-cards">
                        <!-- Player cards will be here -->
                    </div>
                    
                    <div class="result-display" id="result"></div>
                </div>
                
                <div class="betting-area">
                    <div class="bet-option banker" id="bet-banker">
                        <div>BANKER</div>
                        <div class="bet-amount">1.95x</div>
                        <div class="chip" id="banker-chip" style="display: none;">100</div>
                    </div>
                    
                    <div class="bet-option tie" id="bet-tie">
                        <div>TIE</div>
                        <div class="bet-amount">8x</div>
                        <div class="chip" id="tie-chip" style="display: none;">100</div>
                    </div>
                    
                    <div class="bet-option player" id="bet-player">
                        <div>PLAYER</div>
                        <div class="bet-amount">2x</div>
                        <div class="chip" id="player-chip" style="display: none;">100</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Game configuration
        const config = {
            initialBalance: 10000,
            betAmount: 100,
            autoPlayDelay: 3000,
            cardDealSpeed: 300
        };
        
        // Game state
        let state = {
            balance: config.initialBalance,
            currentBet: null,
            gameInProgress: false,
            history: [],
            autoPlay: false
        };
        
        // DOM elements
        const balanceElement = document.getElementById('balance');
        const resultElement = document.getElementById('result');
        const historyElement = document.getElementById('history');
        const bankerCardsElement = document.getElementById('banker-cards');
        const playerCardsElement = document.getElementById('player-cards');
        
        // Betting elements
        const betBanker = document.getElementById('bet-banker');
        const betPlayer = document.getElementById('bet-player');
        const betTie = document.getElementById('bet-tie');
        const bankerChip = document.getElementById('banker-chip');
        const playerChip = document.getElementById('player-chip');
        const tieChip = document.getElementById('tie-chip');
        
        // Card data
        const cardValues = ['A', '2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K'];
        const cardSuits = ['♥', '♦', '♣', '♠'];
        
        // Initialize game
        initGame();
        
        // Event listeners
        betBanker.addEventListener('click', () => placeBet('banker'));
        betPlayer.addEventListener('click', () => placeBet('player'));
        betTie.addEventListener('click', () => placeBet('tie'));
        
        // Game functions
        function initGame() {
            updateBalance();
            startAutoPlay();
        }
        
        function placeBet(type) {
            if (state.gameInProgress || state.autoPlay) return;
            
            // Reset current bet
            resetBetsUI();
            
            // Place new bet
            if (state.balance >= config.betAmount) {
                state.currentBet = type;
                state.balance -= config.betAmount;
                
                // Update UI
                updateBalance();
                showBetChip(type);
                
                // Start game automatically
                setTimeout(() => {
                    if (!state.gameInProgress && state.currentBet) {
                        playGame();
                    }
                }, 500);
            }
        }
        
        function playGame() {
            if (state.gameInProgress || !state.currentBet) return;
            
            state.gameInProgress = true;
            
            // Clear previous cards
            bankerCardsElement.innerHTML = '';
            playerCardsElement.innerHTML = '';
            
            // Generate and shuffle deck
            let deck = generateDeck();
            deck = shuffleDeck(deck);
            
            // Deal initial cards
            const bankerCards = [deck.pop(), deck.pop()];
            const playerCards = [deck.pop(), deck.pop()];
            
            // Display cards with animation
            dealCards(bankerCards, playerCards, () => {
                // Calculate initial scores
                const bankerScore = calculateScore(bankerCards);
                const playerScore = calculateScore(playerCards);
                
                // Check for natural win
                if (bankerScore >= 8 || playerScore >= 8) {
                    finishGame(bankerCards, playerCards, bankerScore, playerScore);
                    return;
                }
                
                // Player drawing rules
                let playerDrewThirdCard = false;
                if (playerScore <= 5) {
                    playerCards.push(deck.pop());
                    playerDrewThirdCard = true;
                    
                    setTimeout(() => {
                        dealThirdCard(playerCards[2], 'player', () => {
                            // Banker drawing rules
                            const shouldBankerDraw = shouldBankerDrawThirdCard(
                                bankerScore, 
                                playerScore, 
                                playerCards[2]?.value
                            );
                            
                            if (shouldBankerDraw) {
                                bankerCards.push(deck.pop());
                                
                                setTimeout(() => {
                                    dealThirdCard(bankerCards[2], 'banker', () => {
                                        finishGame(
                                            bankerCards, 
                                            playerCards, 
                                            calculateScore(bankerCards), 
                                            calculateScore(playerCards)
                                        );
                                    });
                                }, config.cardDealSpeed);
                            } else {
                                finishGame(bankerCards, playerCards, bankerScore, calculateScore(playerCards));
                            }
                        });
                    }, config.cardDealSpeed);
                } else {
                    // Banker drawing rules when player stands
                    if (bankerScore <= 5) {
                        bankerCards.push(deck.pop());
                        
                        setTimeout(() => {
                            dealThirdCard(bankerCards[2], 'banker', () => {
                                finishGame(
                                    bankerCards, 
                                    playerCards, 
                                    calculateScore(bankerCards), 
                                    playerScore
                                );
                            });
                        }, config.cardDealSpeed);
                    } else {
                        finishGame(bankerCards, playerCards, bankerScore, playerScore);
                    }
                }
            });
        }
        
        function dealCards(bankerCards, playerCards, callback) {
            // Deal first card to player and banker
            setTimeout(() => {
                createCardElement(playerCards[0], 'player');
                createCardElement(bankerCards[0], 'banker');
                
                // Deal second card (face down)
                setTimeout(() => {
                    const playerCard = createCardElement(null, 'player', true);
                    const bankerCard = createCardElement(null, 'banker', true);
                    
                    // Reveal cards after a delay
                    setTimeout(() => {
                        playerCard.innerHTML = '';
                        bankerCard.innerHTML = '';
                        createCardFace(playerCards[1], playerCard);
                        createCardFace(bankerCards[1], bankerCard);
                        
                        if (callback) callback();
                    }, config.cardDealSpeed);
                }, config.cardDealSpeed);
            }, config.cardDealSpeed);
        }
        
        function dealThirdCard(card, type, callback) {
            createCardElement(card, type);
            if (callback) setTimeout(callback, config.cardDealSpeed);
        }
        
        function createCardElement(card, type, isFaceDown = false) {
            const cardElement = document.createElement('div');
            cardElement.className = 'card';
            
            if (isFaceDown) {
                cardElement.classList.add('card-back');
            } else if (card) {
                createCardFace(card, cardElement);
            }
            
            const parentElement = type === 'banker' ? bankerCardsElement : playerCardsElement;
            parentElement.appendChild(cardElement);
            
            return cardElement;
        }
        
        function createCardFace(card, element) {
            if (card.suit === '♥' || card.suit === '♦') {
                element.classList.add('red');
            }
            
            element.innerHTML = `
                <div class="card-value top-left">${card.value}</div>
                <div style="font-size: 30px;">${card.suit}</div>
                <div class="card-value bottom-right">${card.value}</div>
            `;
        }
        
        function calculateScore(cards) {
            let score = 0;
            
            for (const card of cards) {
                if (!card) continue;
                
                if (['10', 'J', 'Q', 'K'].includes(card.value)) {
                    score += 0;
                } else if (card.value === 'A') {
                    score += 1;
                } else {
                    score += parseInt(card.value);
                }
            }
            
            return score % 10;
        }
        
        function shouldBankerDrawThirdCard(bankerScore, playerScore, playerThirdCardValue) {
            if (!playerThirdCardValue) {
                return bankerScore <= 5;
            }
            
            const playerThirdCardNumeric = ['10', 'J', 'Q', 'K'].includes(playerThirdCardValue) ? 0 : 
                                         playerThirdCardValue === 'A' ? 1 : parseInt(playerThirdCardValue);
            
            if (bankerScore <= 2) return true;
            if (bankerScore === 3) return playerThirdCardNumeric !== 8;
            if (bankerScore === 4) return playerThirdCardNumeric >= 2 && playerThirdCardNumeric <= 7;
            if (bankerScore === 5) return playerThirdCardNumeric >= 4 && playerThirdCardNumeric <= 7;
            if (bankerScore === 6) return playerThirdCardNumeric >= 6 && playerThirdCardNumeric <= 7;
            return false;
        }
        
        function finishGame(bankerCards, playerCards, bankerScore, playerScore) {
            // Determine winner
            let winner;
            let payoutMultiplier = 0;
            
            if (bankerScore > playerScore) {
                winner = 'banker';
                payoutMultiplier = 1.95;
                showResult(`BANKER WINS ${bankerScore}-${playerScore}`);
            } else if (playerScore > bankerScore) {
                winner = 'player';
                payoutMultiplier = 2;
                showResult(`PLAYER WINS ${playerScore}-${bankerScore}`);
            } else {
                winner = 'tie';
                payoutMultiplier = 8;
                showResult(`TIE ${playerScore}-${playerScore}`);
            }
            
            // Update history
            state.history.push(winner);
            updateHistory();
            
            // Calculate winnings
            if (state.currentBet === winner) {
                const winnings = Math.floor(config.betAmount * payoutMultiplier);
                state.balance += winnings;
                showResult(`${winner.toUpperCase()} WINS! +${winnings}`);
            }
            
            // Reset for next round
            state.currentBet = null;
            state.gameInProgress = false;
            updateBalance();
            resetBetsUI();
            
            // Continue auto-play
            if (state.autoPlay) {
                setTimeout(() => {
                    if (!state.gameInProgress) {
                        placeBet(getRandomBet());
                    }
                }, config.autoPlayDelay);
            }
        }
        
        function showResult(message) {
            resultElement.textContent = message;
            resultElement.style.display = 'block';
            
            setTimeout(() => {
                resultElement.style.display = 'none';
            }, 2000);
        }
        
        function updateBalance() {
            balanceElement.textContent = state.balance.toLocaleString();
        }
        
        function updateHistory() {
            historyElement.innerHTML = '';
            
            const recentHistory = state.history.slice(-10);
            for (const result of recentHistory) {
                const item = document.createElement('div');
                item.className = `history-item history-${result}`;
                item.textContent = result === 'banker' ? 'B' : result === 'player' ? 'P' : 'T';
                historyElement.appendChild(item);
            }
        }
        
        function resetBetsUI() {
            bankerChip.style.display = 'none';
            playerChip.style.display = 'none';
            tieChip.style.display = 'none';
        }
        
        function showBetChip(type) {
            if (type === 'banker') {
                bankerChip.style.display = 'flex';
                bankerChip.textContent = config.betAmount;
            } else if (type === 'player') {
                playerChip.style.display = 'flex';
                playerChip.textContent = config.betAmount;
            } else {
                tieChip.style.display = 'flex';
                tieChip.textContent = config.betAmount;
            }
        }
        
        function startAutoPlay() {
            state.autoPlay = true;
            placeBet(getRandomBet());
        }
        
        function getRandomBet() {
            const options = ['banker', 'player', 'tie'];
            return options[Math.floor(Math.random() * options.length)];
        }
        
        function generateDeck() {
            const deck = [];
            for (const suit of cardSuits) {
                for (const value of cardValues) {
                    deck.push({ suit, value });
                }
            }
            return deck;
        }
        
        function shuffleDeck(deck) {
            for (let i = deck.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [deck[i], deck[j]] = [deck[j], deck[i]];
            }
            return deck;
        }
    </script>
</body>
</html>